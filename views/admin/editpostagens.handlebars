{{#each erros}}
    <div class="alert alert-danger">{{text}}</div>
{{else}}
{{/each}}

<div class="card">
    <div class="card-body">
        <h4>Editar postagem: </h4>
        <form action="/admin/postagens/edit" method="POST">
            <input type="hidden" value="{{postagem._id}}" name="id">
            <label for="titulo">Título: </label>
            <input type="text" class="form-control" name="titulo" value="{{postagem.nome}}">
            <label for="slug">Slug: </label>
            <input type="text" class="form-control" name="slug" value="{{postagem.slug}}">
            <label for="descricao">Descrição: </label>
            <input type="text" class="form-control" name="descricao" value="{{postagem.descricao}}">
            <label for="conteudo">Conteúdo: </label>
            <textarea class="form-control" name="conteudo">{{postagem.conteudo}}</textarea>
            <label for="categoria">Categoria: </label>
            <select id="categoria" name="categoria" class="custom-select">
                {{#each categorias}}
                    <option value="{{_id}}">{{nome}}</option>
                {{else}}
                    <option value="0">Nenhuma categoria registrada!</option>
                {{/each}}
            </select>
            <button type="submit" class="btn btn-success mt-4">Editar postagem</button>
        </form>
        
    </div>
</div>

<script>
    
    function att(){
        var categoria = document.getElementById("categoria")
        var option = categoria.getElementsByTagName("option")
        var id = "{{postagem.categoria._id}}"
        for(var i = 0; i <= option.length; i++){
            if(id == option[i].value){
                option[i].setAttribute("selected", "true")
            }
        }
    }

    att();


</script>